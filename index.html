<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inorganic Chemistry AR - Hydrogen</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.js"></script>

  <script>
    AFRAME.registerComponent('scene-logger', {
      init: function () {
        const log = document.createElement('div');
        log.innerText = 'System Ready: Scan Barcode 1 (Hydrogen)';
        log.style.cssText = 'position:fixed; top:10px; left:10px; color:lime; background:rgba(0,0,0,0.5); padding:5px; z-index:999; font-family:sans-serif;';
        document.body.appendChild(log);
      }
    });
  </script>
</head>

<body style="margin: 0; overflow: hidden;">
  <!-- 
      AR.js Scene
      - detectionMode: mono_and_matrix: Enables both pattern and barcode detection
      - matrixCodeType: 3x3: Defines the barcode type (values 0-63)
    -->
  <a-scene embedded scene-logger vr-mode-ui="enabled: false" renderer="logarithmicDepthBuffer: true; precision: medium;"
    arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3; sourceWidth: 640; sourceHeight: 480; displayWidth: 640; displayHeight: 480;">

    <!-- 
      BARCODE MARKER 1: HYDROGEN (Protium)
      1 Proton (Green), 0 Neutrons, 1 Electron (Blueish-White)
    -->
    <a-marker type="barcode" value="1">

      <!-- Nucleus: Single Proton (Green) -->
      <a-sphere color="#2ECC71" radius="0.2" position="0 0.5 0"></a-sphere>

      <!-- Orbit Path (Static Ring) - Tilted 45 degrees
           Original (Flat): rotation="90 0 0"
           Tilted: We adjust X rotation. 
           NOTE: <a-torus> default is upright (donut standing up). 
           "90 0 0" made it flat. 
           "45 0 0" or "135 0 0" will tilt it.
      -->
      <a-torus color="#7F8C8D" radius="0.6" radius-tubular="0.005" rotation="45 0 0" position="0 0.5 0"></a-torus>

      <!-- Electron Orbit Group 
           We rotate the entire group 45 degrees to match the ring.
           Then we animate the "rotation" property (which functions as local rotation).
           However, standard animation overwrites the 'rotation' attribute. 
           
           SOLUTION: Wrap the animation in a TILTED container.
      -->
      <a-entity rotation="45 0 0" position="0 0.5 0">
        <a-entity animation="property: rotation; to: 0 0 360; loop: true; dur: 3000; easing: linear">
          <!-- Electron (Electricity Blue) -->
          <!-- 
                Note: Since the torus is upright-ish, '0 0 360' (Z-axis rotation) 
                is likely what we want for the electron to follow the ring.
                Let's verify orientation: 
                Torus at 45deg X = Donut leaning back.
                Electron container at 45deg X.
                Electron needs to rotate around the Z axis (the hole of the donut).
            -->
          <a-sphere color="#00FFFF" radius="0.08" position="0.6 0 0"></a-sphere>
        </a-entity>
      </a-entity>

      <!-- Label -->
      <a-text value="Hydrogen (H)" align="center" position="0 1.2 0" color="black" scale="2 2 2"></a-text>

    </a-marker>

    <!-- AR Camera -->
    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
  </a-scene>

  <script>
    // Fix for AR.js mobile resize issue
    window.addEventListener('load', function () {
      setTimeout(function () {
        window.dispatchEvent(new Event('resize'));
      }, 1000);
    });
  </script>
</body>

</html>